<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>Document</title>
</head>
<body>
	
	<ul id="container"></ul>

	<!-- <script>
		var container = document.getElementById('container');
		var now = +new Date();
		var fragment = document.createDocumentFragment();

		for(var i = 0; i < 100000; i ++) {
			var oLi = document.createElement('li');
			oLi.innerText = i;
			fragment.appendChild(oLi);
		}
		container.appendChild(fragment);

		console.log("js运算时间：", new Date() - now);

		setTimeout(function() {
			console.log("总运算时间：", new Date() - now);
		})
	</script> -->
	
	<script>
		//需要插入的容器
		let ul = document.getElementById('container');
		// 插入十万条数据
		let total = 100000;
		// 一次插入 20 条
		let once = 20;
		//总页数
		let page = total/once
		//每条记录的索引
		let index = 0;
		//循环加载数据
		function loop(curTotal,curIndex){
		    if(curTotal <= 0){
		        return false;
		    }
		    //每页多少条
		    let pageCount = Math.min(curTotal , once);
		    window.requestAnimationFrame(function(){
		        let fragment = document.createDocumentFragment();
		        for(let i = 0; i < pageCount; i++){
		            let li = document.createElement('li');
		            li.innerText = curIndex + i + ' : ' + ~~(Math.random() * total)
		            fragment.appendChild(li)
		        }
		        ul.appendChild(fragment)
		        loop(curTotal - pageCount,curIndex + pageCount)
		    })
		}
		loop(total,index);
	</script>

<!-- 	<script>
	// 参考：https://juejin.im/post/5d76f469f265da039a28aff7
	
	/*
		js运算时间 + 渲染时间

	 */
	var container = document.getElementById('container');
	var total = 100000;
	
	var now = +new Date();

	for(var i = 0; i < total; i ++) {
		var oLi = document.createElement('li');
		oLi.innerText = i;
		 container.appendChild(oLi);
	}

	console.log('js运算时间：', new Date() - now);

	setTimeout(function() {
		console.log('总运行时间：', new Date() - now);
	}, 0);
</script> -->
</body>
</html>